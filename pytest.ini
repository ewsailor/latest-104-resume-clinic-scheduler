[tool:pytest]
# 測試配置：基本測試環境設定
minversion = 6.0             # pytest 最低版本要求
testpaths = tests            # 測試檔案搜尋目錄
python_files = test_*.py     # 測試檔案命名規則
python_classes = Test*       # 測試類別命名規則
python_functions = test_*    # 測試函數命名規則
norecursedirs = scripts      # 排除搜尋的目錄

# 警告過濾設定：過濾第三方套件的警告訊息，避免測試輸出被干擾
filterwarnings =
    ignore::PendingDeprecationWarning                   # 忽略待廢棄警告
    ignore::DeprecationWarning                          # 忽略廢棄警告
    ignore::pydantic.warnings.PydanticDeprecatedSince20 # 忽略 Pydantic 廢棄警告
    ignore:Please use `import python_multipart` instead:starlette.formparsers:PendingDeprecationWarning  # 忽略 Starlette 多部分表單警告
    ignore:.*multipart.*:PendingDeprecationWarning      # 忽略所有多部分相關警告

# 測試執行選項：設定測試執行時的輸出格式和行為
addopts = 
    -v                                   # 詳細輸出模式
    --tb=short                           # 簡短的錯誤追蹤資訊
    --strict-markers                     # 嚴格檢查標記定義
    -W ignore::PendingDeprecationWarning # 忽略待廢棄警告
    --cov=app                            # 收集 app 目錄的覆蓋率
    --cov-report=html                    # 生成 HTML 覆蓋率報告
    --cov-report=term                    # 在終端顯示覆蓋率摘要

# 注意：詳細的覆蓋率配置已移至 .coveragerc 檔案

# 自定義測試標記：定義專案特定的測試分類
markers =
    asyncio: 標記測試為非同步測試（需要 async/await 支援） 
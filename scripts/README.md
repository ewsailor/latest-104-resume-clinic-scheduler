# Scripts 目錄

這個目錄包含各種實用腳本，用於開發、測試和維護專案。

## 📁 目錄結構說明

### `tests/` vs `scripts/` 的區別

| 目錄       | 用途           | 內容                           | 執行方式                   |
| ---------- | -------------- | ------------------------------ | -------------------------- |
| `tests/`   | **測試程式碼** | 單元測試、整合測試、端到端測試 | `pytest tests/`            |
| `scripts/` | **開發工具**   | 配置檢查、資料庫遷移、部署腳本 | `python scripts/script.py` |

### 為什麼分開？

- **`tests/`**：測試應用程式的**功能邏輯**
- **`scripts/`**：輔助開發的**實用工具**

## 配置測試腳本

### `test_config.py`

用於驗證所有環境變數和配置是否正確載入的測試腳本。

#### 功能特點

- ✅ **完整配置驗證**：檢查所有關鍵配置項目
- 🎨 **彩色輸出**：使用顏色區分成功、警告和錯誤
- 📊 **詳細摘要**：提供測試結果統計
- 🔧 **多種測試模式**：支援完整測試、快速測試、特定服務測試
- 🛡️ **錯誤處理**：優雅的錯誤處理和退出碼

#### 使用方法

```bash
# 完整測試（推薦）
python scripts/test_config.py

# 快速測試（只檢查關鍵配置）
python scripts/test_config.py --quick

# 只測試資料庫配置
python scripts/test_config.py --db

# 只測試 API 配置
python scripts/test_config.py --api
```

#### 測試項目

1. **基本配置**

   - 應用程式名稱、版本、環境
   - 除錯模式設定

2. **安全配置**

   - SECRET_KEY 和 SESSION_SECRET
   - 密鑰長度驗證

3. **資料庫配置**

   - MySQL 連接設定
   - 使用者帳號驗證
   - 連接字串生成

4. **快取配置**

   - Redis 連接設定
   - 連接字串生成

5. **API 配置**

   - 超時設定驗證
   - 104 API 配置檢查

6. **CORS 配置**

   - 來源設定驗證
   - 列表解析檢查

7. **可選服務**

   - SMTP 配置完整性
   - AWS 配置完整性
   - 104 API 配置完整性

8. **路徑配置**
   - 專案目錄存在性檢查
   - 靜態檔案和模板目錄檢查

#### 輸出範例

```
🚀 完整配置驗證測試
==================================================
🔧 基本配置測試
ℹ️  應用程式名稱: 104 Resume Clinic Scheduler
ℹ️  應用程式版本: 0.1.0
ℹ️  應用程式環境: development
ℹ️  除錯模式: True
✅ 應用程式環境設定正確: development
✅ 開發環境除錯模式已啟用

🔒 安全配置測試
✅ SECRET_KEY 已設定且長度足夠 (64 字元)
ℹ️  SECRET_KEY 預覽: OzCm8K7x...
✅ SESSION_SECRET 已設定且長度足夠 (64 字元)
ℹ️  SESSION_SECRET 預覽: OzCm88L9...

📊 測試摘要
==================================================
總測試項目: 25
成功: 23
警告: 2
錯誤: 0

⚠️ 警告項目:
  - Redis 密碼未設定（開發環境可接受）
  - 104 API 密鑰未設定

✅ 所有關鍵配置都正確！
```

#### 退出碼

- `0`：所有測試通過或只有警告
- `1`：有錯誤項目需要修正

#### 最佳實踐

1. **開發時使用**：每次修改配置後執行測試
2. **部署前檢查**：確保生產環境配置正確
3. **CI/CD 整合**：在自動化流程中加入配置檢查
4. **定期執行**：定期檢查配置完整性

#### 與 `tests/` 的區別

| 項目         | `scripts/test_config.py`        | `tests/test_config.py`        |
| ------------ | ------------------------------- | ----------------------------- |
| **用途**     | 驗證實際配置是否正確            | 測試配置類別的功能            |
| **執行環境** | 真實環境變數                    | 模擬環境變數                  |
| **測試對象** | 配置值是否正確                  | 程式碼邏輯是否正確            |
| **執行方式** | `python scripts/test_config.py` | `pytest tests/test_config.py` |
| **輸出**     | 彩色終端機輸出                  | 測試報告                      |

#### 自訂測試

如需新增測試項目，可以修改 `ConfigTester` 類別：

```python
def test_custom_config(self):
    """自訂配置測試"""
    print(f"{Colors.HEADER}🔧 自訂配置測試{Colors.ENDC}")

    # 您的測試邏輯
    if some_condition:
        self.log_success("自訂配置正確")
    else:
        self.log_error("自訂配置錯誤")

    print()
```

然後在 `run_full_test()` 方法中呼叫：

```python
def run_full_test(self):
    # ... 其他測試
    self.test_custom_config()
    # ... 其他測試
```
